<div class="container">
    <div class="panel-group">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h2>Navigation</h2>
            </div>
            <div class="panel-body">
                <h3>Introduction</h3>
                <p>The applications we have built so far have been single page apps. However a lot of real world
                    applications have more than one page. In this section you will learn about hierarchical
                    navigation to take the user from one page to another, you'll learn about master-detail pages, tabs,
                    carousel pages, dsiplaying alerts and action sheets, and finally toolbars.
                </p>
                <h3>Hierarchical Navigation</h3>
                <p>Ok let's start with what we call hierarchical navigation:</p>
                <figure>
                    <img src="app/xamarin/images/06/Fig06-001.png"/>
                    <figcaption>Fig 06-001</figcaption>
                </figure>
                <p>In the screen shown above we have a label and a button. When the button is clicked the app
                    navigates to another page:</p>
                <figure>
                    <img src="app/xamarin/images/06/Fig06-002.png"/>
                    <figcaption>Fig 06-002</figcaption>
                </figure>
                <p>This page displays a title (Introduction) and a button that takes us back to where we came from.
                    Also in the middle of the page we have a link and another back Button. This is what we call
                    hierarchical navigation. You have probably seen this in a lot of applications where the first
                    time you run them they take you through a tour of how the application works. Another example is
                    a login screen. So when you login successfully the application navigates you to the next page. </p>
                <p>Here is the same app running in Android:</p>
                <figure>
                    <img src="app/xamarin/images/06/Fig06-003.png"/>
                    <figcaption>Fig 06-003</figcaption>
                </figure>
                <p>You can see they are pretty similar apart from, that by default the navigation bar in Android has
                    a blue background.</p>
                <p>We have control over the colour of the navigation bar, the colour of the text, the visibility of the
                    navigation bar etc. </p>
                <p>First of all add two Content Pages:</p>
                <ul>
                    <li>HierarchicalNavigationWelcomePage.xaml</li>
                    <li>HierarchicalNavigationIntroductionPage.xaml</li>
                </ul>
                <p>The HierarchicalNavigationWelcomePage just contains a StackLayout with a Label and a Button:</p>
                <figure>
                <pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;ContentPage xmlns=&quot;http://xamarin.com/schemas/2014/forms&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
             x:Class=&quot;UdemyXamarinForms.PagHierarchicalNavigationWelcomePage&quot;&gt;
        &lt;StackLayout&gt;
            &lt;Label Text=&quot;Welcome&quot; HorizontalOptions=&quot;Center&quot; /&gt;
            &lt;Button Text=&quot;Next&quot; Clicked=&quot;Button_Clicked&quot; /&gt;
    &lt;/StackLayout&gt;
&lt;/ContentPage&gt;</code></pre>
                <figcaption>Fig 06-004</figcaption>
                </figure>
                <p>The HierarchicalNavigationIntroductionPage has the same structure:</p>
                <figure>
                <pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;ContentPage xmlns=&quot;http://xamarin.com/schemas/2014/forms&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
             x:Class=&quot;UdemyXamarinForms.HierarchicalNavigationIntroductionPage&quot;&gt;
    &lt;StackLayout HorizontalOptions=&quot;Center&quot; VerticalOptions=&quot;Center&quot;&gt;
        &lt;Label Text=&quot;This is how the app works.&quot; /&gt;
        &lt;Button Text=&quot;Back&quot; Clicked=&quot;Button_Clicked&quot; /&gt;
    &lt;/StackLayout&gt;
&lt;/ContentPage&gt;</code></pre>
                <figcaption>Fig 06-005</figcaption>
                </figure>
                <p>We add a Title attribute for each ContentPage. For HierarchicalNavigationWelcomePage:</p>
                <figure>
                <pre><code class="xml">&lt;ContentPage Title=&quot;Welcome&quot;</code></pre>
                <figcaption>Fig 06-006</figcaption>
                </figure>
                <p>And for HierarchicalNavigationIntroductionPage:</p>
                <figure>
                <pre><code class="csharp">&lt;ContentPage Title=&quot;Introduction&quot;</code></pre>
                <figcaption>Fig 06-007</figcaption>
                </figure>
                <p>Next in the code-behind for HierarchicalNavigationWelcomePage we implement the event handler for
                    our button:
                </p>
                <figure>
                <pre><code class="csharp">await Navigation.PushAsync(new HierarchicalNavigationIntroductionPage());</code></pre>
                <figcaption>Fig 06-008</figcaption>
                </figure>
                <p>When our use clicks this button we want to navigate to the next page. To do this we use the
                    Navigation property of the page. Each Content Page has a navigation property which is of type
                    INavigation. We use the PushAsync() method passing in  a reference to the page. This method is
                    an async so we need to add the async and await keywords.</p>
                <p>Next on the HierarchicalNavigationIntroductionPage again we have a handler for the Back button.
                    Normally we do not put a back button on a page explicitly. This is because all platforms
                    display a back button on the navigation bar plus Android and Windows actually do have a
                    physical back button. We have added this Back button explicitly to better illustrate how
                    navigation works:</p>
                <figure>
                <pre><code class="csharp">async void Button_Clicked(object sender, EventArgs e)
{
    await Navigation.PopAsync();
}</code></pre>
                <figcaption>Fig 06-009</figcaption>
                </figure>
                <p>As you might have guessed hierarchical navigation uses a stack structure to manage navigation. So
                we push pages onto the Stack:</p>
                <figure>
                    <img src="app/xamarin/images/06/Fig06-010.png"/>
                    <figcaption>Fig 06-010</figcaption>
                </figure>
                <p>And then pop the one that is on the top of the Stack (which is called the Active Page). </p>
                <figure>
                    <img src="app/xamarin/images/06/Fig06-011.png"/>
                    <figcaption>Fig 06-011</figcaption>
                </figure>
                <p>In our App.cs class, where we set our MainPage, we need to wrap our Welcome page inside a new
                    NavigationPage:
                </p>
                <figure>
                <pre><code class="csharp">MainPage = new NavigationPage(new
                    UdemyXamarinForms.HierarchicalNavigationWelcomePage());</code></pre>
                <figcaption>Fig 06-012</figcaption>
                </figure>
                <p>Now if we run the application we see the welcome page with our Navigation bar and page title:</p>
                <figure>
                    <img src="app/xamarin/images/06/Fig06-013.png"/>
                    <figcaption>Fig 06-013</figcaption>
                </figure>
                <p>If we click next we see the Introduction page:</p>
                <figure>
                    <img src="app/xamarin/images/06/Fig06-014.png"/>
                    <figcaption>Fig 06-014</figcaption>
                </figure>
                <p>So we Push a page on the Stack or Pop the one on the top.</p>
                <p>Now, what if you want to hide this navigation bar:</p>
                <figure>
                    <img src="app/xamarin/images/06/Fig06-015.png"/>
                    <figcaption>Fig 06-015</figcaption>
                </figure>
                <p>We use the NavigationPage.HasNavigationBar Attached Bindable Property on the ContentPage
                    element:</p>
                <figure>
                <pre><code class="xml">&lt;ContentPage NavigationPage.HasNavigationBar=&quot;false"</code></pre>
                <figcaption>Fig 06-016</figcaption>
                </figure>
                <p>Now if you run the application you can see the Welcome page no longer displays a NavigationBar:</p>
                <figure>
                    <img src="app/xamarin/images/06/Fig06-017.png"/>
                    <figcaption>Fig 06-017</figcaption>
                </figure>
                <p>However, if we navigate to the Introduction page the Navigation Bar is still present:</p>
                <figure>
                    <img src="app/xamarin/images/06/Fig06-018.png"/>
                    <figcaption>Fig 06-018</figcaption>
                </figure>
                <p>The NavigationBar has to be removed explicitly on every page.</p>
                <p>If we want to change the Navigation Bar text or background color we need to go back to the App.cs
                    class and set the required properties there:
                </p>
                <figure>
                <pre><code class="csharp">MainPage = new NavigationPage(new UdemyXamarinForms.HierarchicalNavigationWelcomePage())
    {
        BarBackgroundColor = Color.Purple,
        BarTextColor = Color.Plum
    };</code></pre>
                <figcaption>Fig 06-019</figcaption>
                </figure>
                <p>Next, if you wish to hide the back button that is displayed in the Navigation Bar by default:</p>
                <figure>
                    <img src="app/xamarin/images/06/Fig06-020.png"/>
                    <figcaption>Fig 06-020</figcaption>
                </figure>
                <p>To do this we use the Attached Bindable Properties of the Navigation class on ContentPage to hide
                the Back button:</p>
                <figure>
                <pre><code class="xml">&lt;ContentPage Title=&quot;Introduction&quot;
        NavigationPage.HasBackButton=&quot;False&quot;</code></pre>
                <figcaption>Fig 06-021</figcaption>
                </figure>
                <p>Now run the application, click next and you will see the back button is no longer displayed in
                    the Navigation Bar:
                </p>
                <figure>
                    <img src="app/xamarin/images/06/Fig06-022.png"/>
                    <figcaption>Fig 06-022</figcaption>
                </figure>
                <p>However, if you run the application in Android (or Windows) there is a physical back button on the
                    device. To disable this as well we must override th OnBackButtonPressed method.</p>
                <figure>
                <pre><code class="csharp">protected override bool OnBackButtonPressed()
{
    return true;
}</code></pre>
                <figcaption>Fig 06-023</figcaption>
                </figure>
                <p>The default method stub returns base.OnBackButtonPressed() which triggers the default behaviour
                    of the device which will take us back to the previous page. However in our method override we
                    return true which disables the Back button functionality.</p>
                <p>Next we will discuss displaying modal pages.</p>
                <h3>Modal Pages</h3>
                <p>Now we will discuss displaying Modal Pages. Here is the app from the previous lecture:</p>
                <figure>
                  <img src="app/xamarin/images/06/Fig06-024.png"/>
                  <figcaption>Fig 06-024</figcaption>
                </figure>
                <p>I've made a slight modification here - look what happens when I tap the next button:</p>
                <figure>
                  <img src="app/xamarin/images/06/Fig06-025.png"/>
                  <figcaption>Fig 06-025</figcaption>
                </figure>
                <p>The introduction page pops from the bottom of the page and we no longer have the navigation bar
                    here. So it forces the user to take some action whether that be filling another form or tapping
                    another button or something. The point here is that the user cannot navigate away until
                    completing that task.
                </p>
                <p>If you want to display a modal page all you have to do is replace the PushAsync method with
                    PushModalAsync:</p>
                <figure>
                    <pre><code class="csharp">await Navigation.PushModalAsync(new ModalIntroductionPage());</code></pre>
                    <figcaption>Fig 06-026</figcaption>
                </figure>
                <p>With a modal page because we no longer have a navigation bar we should explicitly add a button
                    that will let the user navigate away. We modify the Button clicked code from the previous
                    example to call PopModalAsync:</p>
                <figure>
                    <pre><code class="csharp">await Navigation.PopModalAsync();</code></pre>
                    <figcaption>Fig 06-027</figcaption>
                </figure>
                <p>You should also disable OnBackButtonPressed, as discussed previously:</p>
                <figure>
                <pre><code class="csharp">protected override bool OnBackButtonPressed()
{
    return true;
}</code></pre>
                    <figcaption>Fig 06-028</figcaption>
                </figure>
                <h3>A Simple Master Detail</h3>
                <p>In a lot of applications we have what we call master/detail. So here is the list of contacts that
                we built in the last section:</p>
                <figure>
                  <img src="app/xamarin/images/06/Fig06-029.png"/>
                  <figcaption>Fig 06-029</figcaption>
                </figure>
                <p>If I tap on a contact we go to a new page where we can see details about that contact. Here for
                    simplicity I am only displaying the contacts name. We could display any number of properties
                    here but the technique for implementing master/detail remains the same. Also note that the page
                    title is set to the Contacts name:</p>
                <figure>
                  <img src="app/xamarin/images/06/Fig06-030.png"/>
                  <figcaption>Fig 06-030</figcaption>
                </figure>
                <p>First add two pages to the project:</p>
                <ul>
                    <li>ContactPage.xaml - where we have a ListView to display the list of contacts.</li>
                    <li>ContactDetailPage.xaml - where we have a label to display the contacts name.</li>
                </ul>
                <p>Add the following Xaml in the ContactPage:</p>
                <figure>
                <pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
    &lt;ContentPage xmlns=&quot;http://xamarin.com/schemas/2014/forms&quot;
                 xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
                 x:Class=&quot;UdemyXamarinForms.ContactPage&quot;&gt;
    &lt;ListView x:Name=&quot;listView&quot; ItemSelected=&quot;listView_ItemSelected&quot;&gt;
        &lt;ListView.ItemTemplate&gt;
            &lt;DataTemplate&gt;
                &lt;TextCell Text=&quot;{Binding Name}&quot; Detail=&quot;{Binding Status}&quot;/&gt;
            &lt;/DataTemplate&gt;
        &lt;/ListView.ItemTemplate&gt;
    &lt;/ListView&gt;
&lt;/ContentPage&gt;</code></pre>
                    <figcaption>Fig 06-031</figcaption>
                </figure>
                <p>Next add the following code to the code-behind:</p>
                <figure>
                <pre><code class="csharp">public ContactPage ()
{
    InitializeComponent ();

    listView.ItemsSource = new List&lt;Contact&gt;
    {
        new Contact { Name = &quot;Mosh&quot;, ImageUrl = &quot;http://lorempixel.com/100/100/people/1&quot; },
        new Contact { Name = &quot;John&quot;, ImageUrl = &quot;http://lorempixel.com/100/100/people/2&quot;, Status = &quot;Hey let's talk!&quot; }
    };
}

async void listView_ItemSelected(object sender, SelectedItemChangedEventArgs e)
{
    if (e.SelectedItem == null)
        return;

    var contact = e.SelectedItem as Contact;
    await Navigation.PushAsync(new ContactDetailPage(contact));
    listView.SelectedItem = null;
}</code></pre>
                    <figcaption>Fig 06-032</figcaption>
                </figure>
                <p>First we handle the selection. We get the currently selected Contact. We then send the user to
                    the target page using the Navigation.PushAsync method. As part of the navigation we need to send
                    this Contact to the target page. There are several methods that XamarinForms offers to achieve
                    this but my preferred way is to pass the Contact through as a method argument:
                </p>
                <p>Next, add the following code to the code-behind of the ContactDetailPage:</p>
                <figure>
                <pre><code class="csharp">	[XamlCompilation(XamlCompilationOptions.Compile)]
	public partial class ContactDetailPage : ContentPage
	{
		public ContactDetailPage(Contact contact)
		{
            if (contact == null)
                throw new ArgumentNullException();

            BindingContext = contact;

			InitializeComponent ();
		}


	}</code></pre>
                    <figcaption>Fig 06-034</figcaption>
                </figure>
                <p>In the code above code we add a Contact argument to the constructor. We are also checking that the
                Contact is not null - throwing an exception if it is.</p>
                <p>Next it is the responsibility of this class to set it's Binding Context:</p>
                <figure>
                    <pre><code class="csharp">BindingContext = contact;</code></pre>
                    <figcaption>Fig 06-035</figcaption>
                </figure>
                <p>Next in the ContactDetailPage add the following Xaml:</p>
                <figure>
                <pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
    &lt;ContentPage Title=&quot;{Binding Name}&quot;
                 xmlns=&quot;http://xamarin.com/schemas/2014/forms&quot;
                 xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
                 x:Class=&quot;UdemyXamarinForms.ContactDetailPage&quot;&gt;
    &lt;Label Text=&quot;{Binding Name}&quot;/&gt;
&lt;/ContentPage&gt;</code></pre>
                    <figcaption>Fig 06-036</figcaption>
                </figure>
                <p>We use a Binding Expression here to bind the Text property of the Label to the Name of the
                    Contact. We also use a Binding Expression to set the Title of the page.</p>
                <p>Finally in the App class we wrap the ContactPage in a new Navigation Page:</p>
                <figure>
                    <pre><code class="csharp">MainPage = new NavigationPage(new ContactPage());</code></pre>
                    <figcaption>Fig 06-037</figcaption>
                </figure>
                <p>Now if we run the application:</p>
                <figure>
                  <img src="app/xamarin/images/06/Fig06-038.png"/>
                  <figcaption>Fig 06-038</figcaption>
                </figure>
                <p>The tap a contact:</p>
                <figure>
                  <img src="app/xamarin/images/06/Fig06-039.png"/>
                  <figcaption>Fig 06-039</figcaption>
                </figure>
                <p>Finally we set the ListView SelectedItem to null so that no items are selected when we return
                    from the detail page:
                </p>
                <figure>
                    <pre><code class="csharp">listView.SelectedItem = null;</code></pre>
                    <figcaption>Fig 06-040</figcaption>
                </figure>
                <p>This code will result in another ItemSelected event being fired so we add code to the top of the
                method to handle this:</p>
                <figure>
                <pre><code class="csharp">if (e.SelectedItem == null)
                return;</code></pre>
                    <figcaption>Fig 06-041</figcaption>
                </figure>
                <p>So this is how we implement a very simple master/detail. We also have a type of page called
                    MasterDetailPage - which is the topic of the next lecture.</p>
                <h3>Master Detail Page</h3>
                <p>We have a type of page in XamarinForms known as MasterDetailPage. The page provides a slightly
                    different experience than the Master Detail example from the previous section:</p>
                <figure>
                  <img src="app/xamarin/images/06/Fig06-042.png"/>
                  <figcaption>Fig 06-042</figcaption>
                </figure>
                <p>So on the left side is our list of Contacts and on the right side you see a preview of the
                    detail page. When we select a Contact we are navigated to the detail page. We have a link on the
                    detail page which takes us back to the MasterPage.
                </p>
                <p>The preview looks a bit strange on a mobile device but if you run the app on a tablet this is how
                it looks:</p>
                <figure>
                  <img src="app/xamarin/images/06/Fig06-043.png"/>
                  <figcaption>Fig 06-043</figcaption>
                </figure>
                <p>We have the Master panel on the left side and the Detail panel on the right side. To implement
                    this we can modify a version of the ContactPage that we built in the previous example. Add a new
                ContentPage called ContactPage2.xaml:</p>
                <figure>
                <pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
                    &lt;MasterDetailPage
                            xmlns=&quot;http://xamarin.com/schemas/2014/forms&quot;
                            xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
                            x:Class=&quot;UdemyXamarinForms.ContactPage2&quot;
                            IsPresented=&quot;True&quot;&gt;
    &lt;MasterDetailPage.Master&gt;
        &lt;ContentPage Title=&quot;Contacts&quot;&gt;
            &lt;ListView x:Name=&quot;listView&quot; ItemSelected=&quot;listView_ItemSelected&quot;&gt;
                &lt;ListView.ItemTemplate&gt;
                    &lt;DataTemplate&gt;
                        &lt;TextCell Text=&quot;{Binding Name}&quot; Detail=&quot;{Binding Status}&quot;/&gt;
                    &lt;/DataTemplate&gt;
                &lt;/ListView.ItemTemplate&gt;
            &lt;/ListView&gt;
        &lt;/ContentPage&gt;
    &lt;/MasterDetailPage.Master&gt;
    &lt;MasterDetailPage.Detail&gt;
        &lt;ContentPage/&gt;
    &lt;/MasterDetailPage.Detail&gt;
&lt;/MasterDetailPage&gt;</code></pre>
                    <figcaption>Fig 06-044</figcaption>
                </figure>
                <p>In the code-behind add the following code:</p>
                <figure>
                <pre><code class="csharp">[XamlCompilation(XamlCompilationOptions.Compile)]
public partial class ContactPage2 : MasterDetailPage
{
    public ContactPage2 ()
    {
        InitializeComponent ();

        listView.ItemsSource = new List&lt;Contact&gt;
        {
            new Contact { Name = &quot;Mosh&quot;, ImageUrl = &quot;http://lorempixel.com/100/100/people/1&quot; },
            new Contact { Name = &quot;John&quot;, ImageUrl = &quot;http://lorempixel.com/100/100/people/2&quot;, Status = &quot;Hey let's talk!&quot; }
        };
    }

    void listView_ItemSelected(object sender, SelectedItemChangedEventArgs e)
    {
        var contact = e.SelectedItem as Contact;
        Detail = new NavigationPage(new ContactDetailPage(contact));
        IsPresented = false; // IsMasterPresented
    }
}</code></pre>
                    <figcaption>Fig 06-045</figcaption>
                </figure>
                <p>We have promoted the page from a Content Page to a MasterDetailPage. In XamarinForms there is an
                    abstract class called Page which has a few different derivatives:</p>
                <figure>
                  <img src="app/xamarin/images/06/Fig06-046.png"/>
                  <figcaption>Fig 06-046</figcaption>
                </figure>
                <p>One of them is ContentPage which is the one we have used most of the time so far. Another is
                    MasterDetailPage which is what we are using in this demo.</p>
                <p>The MasterDetailPage has two properties: Master and Detail both of which are of type Page which
                    means you can assign them to an instance of any derivative of the Page class.</p>
                <p>We also go into code-behind and change the parent of this class from ContentPage to
                    MasterDetailPage:</p>
                <figure>
                    <pre><code class="csharp">public partial class ContactPage2 : MasterDetailPage</code></pre>
                    <figcaption>Fig 06-047</figcaption>
                </figure>
                <p>Now we need to set the Master and Detail property of the Page. We do this in the Xaml using
                    Property Element Syntax:
                </p>
                <figure>
                <pre><code class="xml">&lt;MasterDetailPage.Master&gt;
&lt;/MasterDetailPage.Master&gt;
&lt;MasterDetailPage.Detail&gt;
&lt;/MasterDetailPage.Detail&gt;</code></pre>
                    <figcaption>Fig 06-048</figcaption>
                </figure>
                <p>Now in the Master we want a page with the list of Contacts - we can move our existing code into
                    the MasterDetailPage.Master section:</p>
                <figure>
                <pre><code class="xml">MasterDetailPage.Master&gt;
&lt;ContentPage Title=&quot;Contacts&quot;&gt;
    &lt;ListView x:Name=&quot;listView&quot; ItemSelected=&quot;listView_ItemSelected&quot;&gt;
        &lt;ListView.ItemTemplate&gt;
            &lt;DataTemplate&gt;
                &lt;TextCell Text=&quot;{Binding Name}&quot; Detail=&quot;{Binding Status}&quot;/&gt;
            &lt;/DataTemplate&gt;
        &lt;/ListView.ItemTemplate&gt;
    &lt;/ListView&gt;
&lt;/ContentPage&gt;
                    &lt;/MasterDetailPage.Master&gt;</code></pre>
                    <figcaption>Fig 06-049</figcaption>
                </figure>
                <p>Don't forget to move the xml namespace declarations and x:Class declaration from the ContentPage
                    element to the root MasterDetailPage.</p>
                <p>New we need to set the Detail page. The detail page needs to be set dynamically so we will do
                    that in the code-behind. However the MasterDetailPage has a strict requirement that the Detail
                    element in Xaml must be set to something (it cannot be left null). So in this example we just
                    set it to a blank ContentPage:</p>
                <figure>
                <pre><code class="xml">    &lt;MasterDetailPage.Detail&gt;
    &lt;ContentPage/&gt;
&lt;/MasterDetailPage.Detail&gt;</code></pre>
                    <figcaption>Fig 06-050</figcaption>
                </figure>



                <h3>Tabbed Page</h3>
                <p></p>
                <h3>Carousel Page</h3>
                <p></p>
                <h3>Displaying Popups</h3>
                <p></p>
                <h3>Toolbar Items</h3>
                <p></p>
                <h3>Cheat Sheet</h3>
                <p></p>
                <h3>Exercise - InstagramApp</h3>
                <p></p>
            </div>
        </div>
    </div>
</div>